/* 
	Module KBaseInferelator version 1.0
	This module provides a set of methods for work with cMonkey biclustering tool.
	
	Data types summary
	Input data types:
	GeneList - list of regulatory genes
	KBaseExpression.ExpressionSeries represents a list of expression data samples that serve as an input of cMonkey.
	CmonkeyRunResult data generated by a single run of cMonkey (run_infos table of cMonkey results)

	Output data types:
	InferelatorRunResult - contains a list of Inferelator hits

	Methods summary
	run_inferelator - Starts Inferelator server run with given parameters and  workspace ID where final results will be saved and returns job ID of the run
*/

module Inferelator
{
	/* Represents KBase gene identifier
		@id external
	*/
	typedef string gene_id;

	/* Represents KBase gene identifier
		@id ws Inferelator.GeneList
	*/
	typedef string gene_list_ref;
	
	/* Represents KBase gene identifier
		@id ws Cmonkey.CmonkeyRunResult
	*/
	typedef string cmonkey_run_result_ref;

	/* Represents KBase gene identifier
		@id ws KBaseExpression.ExpressionSeries
	*/
	typedef string expression_series_ref;
	

	/* Represents a list of gene ids
		string id - workspace name of the list
		string source_id - id of source genome
		string description
		list <gene_id> genes; - list of gene ids 

		@optional description
	*/
	typedef structure{
		string id;
		string source_id;
		string description;
		list <gene_id> genes;
	} GeneList;


	/* Contains parameters of Inferelator run
		gene_list_ref tf_list_ws_ref - ref to transcription factor ids list
		cmonkey_run_result_ref cmonkey_run_result_ws_ref - ref to cMonkey run result
		expression_series_ref expression_series_ws_ref - ref to expression data series
	*/
	typedef structure{
		gene_list_ref tf_list_ws_ref;
		cmonkey_run_result_ref cmonkey_run_result_ws_ref;
		expression_series_ref expression_series_ws_ref;
	} InferelatorRunParameters;

	/* Represents a single interaction found by Inferelator
		gene_id tf_id - id of regulatory gene
		string bicluster_id - id of bicluster
		double coeff - coefficient
	*/
	typedef structure{
		gene_id tf_id;
		string bicluster_id;
		float coeff;
	} InferelatorHit;

	/* Represents data from a single run of Inferelator
		string id - identifier of Inferelator run result
		string organism - organism name
		InferelatorRunParameters params - run parameters
		list <InferelatorHit> hits - list of hits

		@optional organism hits
	*/
	typedef structure{
		string id;
		string organism;
		InferelatorRunParameters params;
		list <InferelatorHit> hits;
	} InferelatorRunResult;

	/*	Starts cMonkey server run for a series of expression data stored in workspace and returns ID of the run result object
		string ws_id - workspace id where run result would be written
		InferelatorRunParameters params - run parameters 
		string job_id - identifier of job object
	*/
	funcdef run_inferelator(string ws_id, InferelatorRunParameters params) returns(string job_id) authentication required;
};

